<section class="pd" *ngIf="pet() as p; else notFound">
  <div class="pd__crumbs">
    <a routerLink="/pets">Pets</a>
    <span>‚Ä∫</span>
    <span>Detalhes do Pet</span>
  </div>

  <div class="pd__grid">
    <!-- COL ESQUERDA -->
    <mat-card class="pd__left">
      <div class="pd__imgWrap">
        <img class="pd__img" [src]="p.image" [alt]="p.name" />
        <span class="pd__chip" [class.pd__chip--adopted]="p.status === 'ADOTADO'">
          <mat-icon>{{ p.status === 'ADOTADO' ? 'verified' : 'check_circle' }}</mat-icon>
          {{ p.status === 'ADOTADO' ? 'Adotado' : 'Dispon√≠vel' }}
        </span>
      </div>

      <h2 class="pd__name">{{ p.name }}</h2>

      <!-- esp√©cie em linha separada (como no print) -->
      <div class="pd__speciesLine">
        <mat-icon>pets</mat-icon>
        <span>{{ p.species }}</span>
      </div>

      <!-- LISTA (Ra√ßa / Idade / Data / Peso / Cor) -->
      <div class="pd__list" *ngIf="extraInfo() as e">
        <div class="pd__row">
          <div class="pd__ico">
            <mat-icon>hourglass_empty</mat-icon>
          </div>
          <div class="pd__rowText">
            <div class="pd__rowLabel">Ra√ßa</div>
            <div class="pd__rowValue">{{ p.breed }}</div>
          </div>
        </div>

        <div class="pd__row">
          <div class="pd__ico">
            <mat-icon>cake</mat-icon>
          </div>
          <div class="pd__rowText">
            <div class="pd__rowLabel">Idade</div>
            <div class="pd__rowValue">{{ p.age }}</div>
          </div>
        </div>

        <div class="pd__row">
          <div class="pd__ico">
            <mat-icon>event</mat-icon>
          </div>
          <div class="pd__rowText">
            <div class="pd__rowLabel">Data de Entrada</div>
            <div class="pd__rowValue">{{ e.entryDate }}</div>
          </div>
        </div>

        <div class="pd__row">
          <div class="pd__ico">
            <mat-icon>monitor_weight</mat-icon>
          </div>
          <div class="pd__rowText">
            <div class="pd__rowLabel">Peso</div>
            <div class="pd__rowValue">{{ e.weightKg }} kg</div>
          </div>
        </div>

        <div class="pd__row">
          <div class="pd__ico">
            <mat-icon>palette</mat-icon>
          </div>
          <div class="pd__rowText">
            <div class="pd__rowLabel">Cor</div>
            <div class="pd__rowValue">{{ e.color }}</div>
          </div>
        </div>
      </div>

      <!-- Caracter√≠sticas (como no print) -->
      <mat-card class="pd__box">
        <h3 class="pd__boxTitle">Caracter√≠sticas</h3>

        <mat-chip-set class="pd__chips">
          @for (c of characteristics(); track c) {
            <mat-chip>{{ c }}</mat-chip>
          }
        </mat-chip-set>
      </mat-card>

      <!-- A√ß√µes r√°pidas (ADMIN) -->
      <mat-card class="pd__box" *ngIf="isAdmin()">
        <h3 class="pd__boxTitle">A√ß√µes R√°pidas</h3>

        <div class="pd__adminBtns">
          <button mat-stroked-button type="button" (click)="editPet()">
            <mat-icon>edit</mat-icon>
            Editar Dados Cadastrais
          </button>

          <button mat-stroked-button color="warn" type="button" (click)="deletePet()">
            <mat-icon>delete</mat-icon>
            Deletar Pet
          </button>
        </div>
      </mat-card>
    </mat-card>

    <!-- COL DIREITA -->
    <mat-card class="pd__right">
      <div class="pd__tabs">
        <button class="pd__tab pd__tab--active" type="button">
          <mat-icon>favorite</mat-icon>
          Ado√ß√£o
        </button>
        <button class="pd__tab" type="button" disabled>
          <mat-icon>healing</mat-icon>
          Hist√≥rico
        </button>
        <button class="pd__tab" type="button" disabled>
          <mat-icon>vaccines</mat-icon>
          Cuidados
        </button>
      </div>

      <div class="pd__statusCard">
        <h3>Status Atual</h3>
        <p class="pd__muted">
          Esse pet est√° {{ p.status === 'ADOTADO' ? 'adotado' : 'dispon√≠vel para ado√ß√£o' }}.
        </p>

        <div class="pd__statusRow">
          <div class="pd__badge" [class.pd__badge--ok]="p.status === 'DISPONIVEL'">
            <mat-icon>{{ p.status === 'ADOTADO' ? 'verified' : 'check_circle' }}</mat-icon>
            <span>{{ p.status === 'ADOTADO' ? 'Adotado' : 'Dispon√≠vel para Ado√ß√£o' }}</span>
          </div>

          <div class="pd__tiny">
            <div><span>Tempo no abrigo</span><strong>‚Äî</strong></div>
            <div><span>√öltima atualiza√ß√£o</span><strong>‚Äî</strong></div>
          </div>
        </div>

        <div class="pd__note">
          <mat-icon>info</mat-icon>
          <div>
            <strong>Informa√ß√µes importantes</strong>
            <p>Ao adotar, voc√™ se compromete com os cuidados e bem-estar do pet.</p>
          </div>
        </div>
      </div>

      <button
        mat-flat-button
        color="primary"
        class="pd__cta"
        [disabled]="p.status === 'ADOTADO'"
        [routerLink]="['/pets', p.id, 'adotar']"
      >
        <mat-icon>favorite</mat-icon>
        Adotar {{ p.name }}
      </button>
    </mat-card>
  </div>
</section>

<ng-template #notFound>
  <section class="pd pd--empty">
    <h2>Pet n√£o encontrado üòø</h2>
    <button mat-stroked-button routerLink="/pets">
      <mat-icon>arrow_back</mat-icon>
      Voltar para Pets
    </button>
  </section>
</ng-template>
